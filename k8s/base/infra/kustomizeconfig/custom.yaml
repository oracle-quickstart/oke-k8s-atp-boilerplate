#################################################################################
# CRDs custom name references to insure proper prefixing/suffixing of resources #
#################################################################################
nameReference:
# CRD source values
- kind: ServiceInstance
  # field path and type where the name being referenced needs to be transformed
  fieldSpecs:
  - path: spec/instanceRef/name
    kind: ServiceBinding
  - path: spec/parameters/name
    kind: ServiceInstance

# references of the secret name generated by ServiceBinding in Deployment, Jobs and Pods
# as a secret volume mount, env value or envFrom value
- kind: ServiceBinding
  fieldSpecs:
  # env: valueFrom
  - path: spec/template/spec/containers/env/valueFrom/secretKeyRef/name
    kind: Deployment
  - path: spec/template/spec/containers/env/valueFrom/secretKeyRef/name
    kind: Job
  - path: spec/containers/env/valueFrom/secretKeyRef/name
    kind: Pod
  # volume: secret
  - path: spec/template/spec/volumes/secret/secretName
    kind: Deployment
  - path: spec/template/spec/volumes/secret/secretName
    kind: Job
  - path: spec/volumes/secret/secretName
    kind: Pod
  # envFrom: secretRef
  - path: spec/template/spec/containers/envFrom/secretRef/name
    kind: Deployment
  - path: spec/template/spec/containers/envFrom/secretRef/name
    kind: Job
  - path: spec/containers/envFrom/secretRef/name
    kind: Pod

# reference secret name in ServiceBinding
- kind: Secret
  fieldSpecs:
  - path: spec/parametersFrom/secretKeyRef/name
    kind: ServiceBinding
  - path: spec/parametersFrom/secretKeyRef/name
    kind: ServiceInstance
